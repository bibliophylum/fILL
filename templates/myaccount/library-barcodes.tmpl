<TMPL_INCLUDE NAME="header.tmpl">

<link type="text/css" href="/css/maplin-theme/jquery-ui-1.8.16.custom.css" rel="stylesheet" />
<script type="text/javascript" src="/jquery-1.7.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<script type="text/javascript" charset="utf-8" src="/DataTables-1.8.2/media/js/jquery.dataTables.js"></script>

<script type="text/javascript" src="/library-barcodes.js"></script>

<script type="text/javascript">

$.ajaxSetup ({  
  cache: false  
});  

$('document').ready(function(){

    oTable_barcodes = $('#datatable_barcodes').dataTable({
       "bJQueryUI": true,
        "sPaginationType": "full_numbers",
        "bInfo": true,
      	"bSort": true,
	"sDom": '<"H"Tfr>t<"F"ip>',
// Requires Flash ver 10...
//	"oTableTools": {
//                "sSwfPath": "/DataTables-1.8.2/extras/TableTools/media/swf/copy_cvs_xls_pdf.swf"
//		"aButtons": [
//			"copy", "csv", "xls", "pdf",
//			{
//				"sExtends":    "collection",
//				"sButtonText": "Save",
//				"aButtons":    [ "csv", "xls", "pdf" ]
//			}
//		]
//	},

        "iDisplayLength": 25,
        "aLengthMenu": [[25, 50, 100, -1], [25, 50, 100, "All"]],

        "aoColumns": [
            { "mDataProp": "lid" },
            { "mDataProp": "borrower" },
            { "mDataProp": "name" },
            { "mDataProp": "library" },
            { "mDataProp": "barcode" },
            { "mDataProp": "update" },      
        ]

    });

/*
    $.getJSON('/cgi-bin/get-live-requests.cgi', {lid: <TMPL_VAR name="lid">},
            function(data){
                build_table(data);
           })
	.success(function() {
	    //alert('success');
	})
	.error(function() {
	    alert('error');
	})
	.complete(function() {
            //alert('ajax complete');
	});
*/
});

</script>


<div id="main">

  <div id="leftcontent">
    <h2>Instructions</h2>
    <ol>
      <li>none yet</li>
    </ol>
  </div>

  <div id="middlecontent">
    <!--     <div id="mylistDiv">  -->
    <h4>Library barcodes from your ILS</h4>
    <div class="dataTable_wrapper">
      <table id="datatable_barcodes" width="100%">
	<thead>
	  <tr>
	    <th>lid</th><th>borrower</th><th>name</th><th>library</th><th>barcode</th><th>update</th>
	  </tr>
	</thead>
	<tbody>
	  <TMPL_LOOP name="barcodes">
	    <tr>
	      <td><TMPL_VAR name="lid"></td>
	      <td><TMPL_VAR name="borrower"></td>
	      <td><TMPL_VAR name="name"></td>
	      <td><TMPL_VAR name="library"></td>
	      <td><TMPL_VAR name="barcode"></td>
	      <td>
		<form action="/cgi-bin/update-library-barcode.cgi">
		  <input type="text" name="barcode" value='<TMPL_VAR name="barcode">'>
		  <input type="hidden" name="lid" value='<TMPL_VAR name="lid">'>
		  <input type="hidden" name="borrower" value='<TMPL_VAR name="borrower">'>
		  <input type="submit" value="Update">
		</form>
	      </td>
	    </tr>
	  </TMPL_LOOP>
	</tbody>
      </table>
    </div>
  </div>
  
</div>

<TMPL_INCLUDE NAME="footer.tmpl">
